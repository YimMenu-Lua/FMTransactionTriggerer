local service_transactions_tab = gui.get_tab("Service Transactions")

local transactions = {
    "SERVICE_EARN_PICKUP",
    "SERVICE_EARN_JOBS",
    "SERVICE_EARN_BETTING",
    "SERVICE_EARN_LOTTERY",
    "SERVICE_EARN_CHALLENGE_WIN",
    "SERVICE_EARN_PROPERTY_SALES",
    "SERVICE_EARN_VEHICLE_SALES",
    "SERVICE_EARN_LESTER_TARGET_KILL",
    "SERVICE_EARN_BOUNTY_COLLECTED",
    "SERVICE_EARN_CRATE_DROP",
    "SERVICE_EARN_HOLDUPS",
    "SERVICE_EARN_IMPORT_EXPORT",
    "SERVICE_EARN_ARMORED_TRUCKS",
    "SERVICE_EARN_JOBSHARE_CASH",
    "SERVICE_EARN_NOT_BADSPORT",
    "SERVICE_EARN_BANK_INTEREST",
    "SERVICE_EARN_DEBUG",
    "SERVICE_EARN_CNCW",
    "SERVICE_EARN_CNCB",
    "SERVICE_EARN_JOB_BONUS",
    "SERVICE_EARN_BEND_JOB",
    "SERVICE_EARN_PERSONAL_VEHICLE",
    "SERVICE_EARN_DAILY_OBJECTIVES",
    "SERVICE_EARN_AMBIENT_JOB_PLANE_TAKEDOWN",
    "SERVICE_EARN_AMBIENT_JOB_DISTRACT_COPS",
    "SERVICE_EARN_AMBIENT_JOB_DESTROY_VEH",
    "SERVICE_EARN_REFUND_BACKUP_VAGOS",
    "SERVICE_EARN_REFUND_BACKUP_LOST",
    "SERVICE_EARN_REFUND_BACKUP_FAMILIES",
    "SERVICE_EARN_REFUND_HIRE_MUGGER",
    "SERVICE_EARN_REFUND_HIRE_MERCENARY",
    "SERVICE_EARN_REFUND_BUY_CARDROPOFF",
    "SERVICE_EARN_REFUND_HELI_PICKUP",
    "SERVICE_EARN_REFUND_BOAT_PICKUP",
    "SERVICE_EARN_REFUND_CLEAR_WANTED",
    "SERVICE_EARN_REFUND_HEAD_2_HEAD",
    "SERVICE_EARN_REFUND_CHALLENGE",
    "SERVICE_EARN_REFUND_SHARE_LAST_JOB",
    "SERVICE_EARN_REFUND_LOTTERY",
    "SERVICE_EARN_REFUNDAPPEARANCE",
    "SERVICE_EARN_GANGATTACK_PICKUP",
    "SERVICE_EARN_AMBIENT_JOB_HOT_TARGET_DELIVER",
    "SERVICE_EARN_AMBIENT_JOB_HOT_TARGET_KILL",
    "SERVICE_EARN_AMBIENT_JOB_URBAN_WARFARE",
    "SERVICE_EARN_AMBIENT_JOB_CHECKPOINT_COLLECTION",
    "SERVICE_EARN_AMBIENT_JOB_TIME_TRIAL",
    "SERVICE_EARN_AMBIENT_JOB_CHALLENGES",
    "SERVICE_EARN_AMBIENT_JOB_HELI_HOT_TARGET",
    "SERVICE_EARN_AMBIENT_JOB_DEAD_DROP",
    "SERVICE_EARN_AMBIENT_JOB_PENNED_IN",
    "SERVICE_EARN_AMBIENT_JOB_PASS_PARCEL",
    "SERVICE_EARN_AMBIENT_JOB_BLAST",
    "SERVICE_EARN_AMBIENT_JOB_HOT_PROPERTY",
    "SERVICE_EARN_AMBIENT_JOB_KING",
    "SERVICE_EARN_AMBIENT_JOB_BEAST",
    "SERVICE_EARN_BOSS",
    "SERVICE_EARN_GOON",
    "SERVICE_EARN_BOSS_AGENCY",
    "SERVICE_EARN_FROM_DESTROYING_CONTRABAND",
    "SERVICE_EARN_PREMIUM_JOB",
    "SERVICE_EARN_FROM_VEHICLE_EXPORT",
    "SERVICE_EARN_SMUGGLER_AGENCY",
    "SERVICE_EARN_WAGE_PAYMENT_BONUS",
    "SERVICE_EARN_WAGE_PAYMENT",
    "SERVICE_EARN_REFUNDAMMODROP",
    "SERVICE_EARN_SALVAGE_CHECKPOINT_COLLECTION",
    "SERVICE_EARN_AMBIENT_MUGGING",
    "SERVICE_EARN_AMBIENT_PICKUP",
    "SERVICE_EARN_DEATHMATCH_BOUNTY",
    "SERVICE_EARN_CASHING_OUT",
    "SERVICE_EARN_JOB_BONUS_CRIMINAL_MASTERMIND",
    "SERVICE_EARN_JOB_BONUS_HEIST_AWARD",
    "SERVICE_EARN_JOB_BONUS_FIRST_TIME_BONUS",
    "SERVICE_EARN_REFUND_ORBITAL_MANUAL",
    "SERVICE_EARN_REFUND_ORBITAL_AUTO",
    "SERVICE_EARN_GANGOPS_WAGES",
    "SERVICE_EARN_GANGOPS_WAGES_BONUS",
    "SERVICE_EARN_GANGOPS_PREP_PARTICIPATION",
    "SERVICE_EARN_GANGOPS_SETUP",
    "SERVICE_EARN_GANGOPS_SETUP_FAIL",
    "SERVICE_EARN_GANGOPS_FINALE",
    "SERVICE_EARN_GANGOPS_AWARD_MASTERMIND_2",
    "SERVICE_EARN_GANGOPS_AWARD_MASTERMIND_3",
    "SERVICE_EARN_GANGOPS_AWARD_MASTERMIND_4",
    "SERVICE_EARN_GANGOPS_AWARD_LOYALTY_AWARD_2",
    "SERVICE_EARN_GANGOPS_AWARD_LOYALTY_AWARD_3",
    "SERVICE_EARN_GANGOPS_AWARD_LOYALTY_AWARD_4",
    "SERVICE_EARN_GANGOPS_AWARD_FIRST_TIME_XM_BASE",
    "SERVICE_EARN_GANGOPS_AWARD_FIRST_TIME_XM_SUBMARINE",
    "SERVICE_EARN_GANGOPS_AWARD_FIRST_TIME_XM_SILO",
    "SERVICE_EARN_GANGOPS_AWARD_SUPPORTING",
    "SERVICE_EARN_GANGOPS_AWARD_ORDER",
    "SERVICE_EARN_GANGOPS_ELITE_XM_BASE",
    "SERVICE_EARN_GANGOPS_ELITE_XM_SUBMARINE",
    "SERVICE_EARN_GANGOPS_ELITE_XM_SILO",
    "SERVICE_EARN_GANGOPS_RIVAL_DELIVERY",
    "SERVICE_EARN_DOOMSDAY_FINALE_BONUS",
    "SERVICE_EARN_BOUNTY_HUNTER_REWARD",
    "SERVICE_EARN_FROM_BUSINESS_BATTLE",
    "SERVICE_EARN_FROM_CLUB_MANAGEMENT_PARTICIPATION",
    "SERVICE_EARN_FROM_FMBB_PHONECALL_MISSION",
    "SERVICE_EARN_FROM_BUSINESS_HUB_SELL",
    "SERVICE_EARN_FROM_FMBB_BOSS_WORK",
    "SERVICE_EARN_FMBB_WAGE_BONUS",
    "SERVICE_EARN_BB_EVENT_BONUS",
    "SERVICE_EARN_ARENA_SKILL_LVL_AWARD",
    "SERVICE_EARN_ARENA_CAREER_TIER_PROGRESSION_1",
    "SERVICE_EARN_ARENA_CAREER_TIER_PROGRESSION_2",
    "SERVICE_EARN_ARENA_CAREER_TIER_PROGRESSION_3",
    "SERVICE_EARN_ARENA_CAREER_TIER_PROGRESSION_4",
    "SERVICE_EARN_SPIN_THE_WHEEL_CASH",
    "SERVICE_EARN_ASSASSINATE_TARGET_KILLED",
    "SERVICE_EARN_ARENA_WAR",
    "SERVICE_EARN_REFUND_ARENA_SPEC_BOX_ENTRY",
    "SERVICE_EARN_AMBIENT_JOB_RC_TIME_TRIAL",
    "SERVICE_EARN_DAILY_OBJECTIVE_EVENT",
    "SERVICE_EARN_COLLECTABLES_ACTION_FIGURES",
    "SERVICE_EARN_CASINO_MISSION_REWARD",
    "SERVICE_EARN_CASINO_AWARD_MISSION_ONE_FIRST_TIME",
    "SERVICE_EARN_CASINO_AWARD_MISSION_TWO_FIRST_TIME",
    "SERVICE_EARN_CASINO_AWARD_MISSION_THREE_FIRST_TIME",
    "SERVICE_EARN_CASINO_AWARD_MISSION_FOUR_FIRST_TIME",
    "SERVICE_EARN_CASINO_AWARD_MISSION_FIVE_FIRST_TIME",
    "SERVICE_EARN_CASINO_AWARD_MISSION_SIX_FIRST_TIME",
    "SERVICE_EARN_CASINO_AWARD_STRAIGHT_FLUSH",
    "SERVICE_EARN_CASINO_AWARD_TOP_PAIR",
    "SERVICE_EARN_CASINO_AWARD_FULL_HOUSE",
    "SERVICE_EARN_CASINO_AWARD_LUCKY_LUCKY",
    "SERVICE_EARN_CASINO_AWARD_HIGH_ROLLER_BRONZE",
    "SERVICE_EARN_CASINO_AWARD_HIGH_ROLLER_SILVER",
    "SERVICE_EARN_CASINO_AWARD_HIGH_ROLLER_GOLD",
    "SERVICE_EARN_CASINO_AWARD_HIGH_ROLLER_PLATINUM",
    "SERVICE_EARN_CASINO_STORY_MISSION_REWARD",
    "SERVICE_EARN_CASINO_HEIST_SETUP_MISSION",
    "SERVICE_EARN_CASINO_HEIST_PREP_MISSION",
    "SERVICE_EARN_CASINO_HEIST_FINALE",
    "SERVICE_EARN_CASINO_HEIST_AWARD_SMASH_N_GRAB",
    "SERVICE_EARN_CASINO_HEIST_AWARD_IN_PLAIN_SIGHT",
    "SERVICE_EARN_CASINO_HEIST_AWARD_UNDETECTED",
    "SERVICE_EARN_CASINO_HEIST_AWARD_ALL_ROUNDER",
    "SERVICE_EARN_CASINO_HEIST_AWARD_ELITE_THIEF",
    "SERVICE_EARN_CASINO_HEIST_AWARD_PROFESSIONAL",
    "SERVICE_EARN_CASINO_HEIST_ELITE_STEALTH",
    "SERVICE_EARN_CASINO_HEIST_ELITE_SUBTERFUGE",
    "SERVICE_EARN_CASINO_HEIST_ELITE_DIRECT",
    "SERVICE_EARN_COLLECTABLE_ITEM",
    "SERVICE_EARN_COLLECTABLE_COMPLETED_COLLECTION",
    "SERVICE_EARN_COLLECTABLES_SIGNAL_JAMMERS",
    "SERVICE_EARN_COLLECTABLES_SIGNAL_JAMMERS_COMPLETE",
    "SERVICE_EARN_ISLAND_HEIST_FINALE",
    "SERVICE_EARN_ISLAND_HEIST_ELITE_CHALLENGE",
    "SERVICE_EARN_ISLAND_HEIST_AWARD_PROFESSIONAL",
    "SERVICE_EARN_ISLAND_HEIST_AWARD_ELITE_THIEF",
    "SERVICE_EARN_ISLAND_HEIST_AWARD_THE_ISLAND_HEIST",
    "SERVICE_EARN_ISLAND_HEIST_AWARD_GOING_ALONE",
    "SERVICE_EARN_ISLAND_HEIST_AWARD_TEAM_WORK",
    "SERVICE_EARN_ISLAND_HEIST_AWARD_CAT_BURGLAR",
    "SERVICE_EARN_ISLAND_HEIST_AWARD_PRO_THIEF",
    "SERVICE_EARN_ISLAND_HEIST_AWARD_MIXING_IT_UP",
    "SERVICE_EARN_ISLAND_HEIST_PREP",
    "SERVICE_EARN_ISLAND_HEIST_DJ_MISSION",
    "SERVICE_EARN_TUNER_ROBBERY_PREP",
    "SERVICE_EARN_TUNER_ROBBERY_FINALE",
    "SERVICE_EARN_TUNER_CAR_CLUB_MEMBERSHIP",
    "SERVICE_EARN_TUNER_DAILY_VEHICLE",
    "SERVICE_EARN_TUNER_DAILY_VEHICLE_BONUS",
    "SERVICE_EARN_TUNER_AWARD_UNION_DEPOSITORY",
    "SERVICE_EARN_TUNER_AWARD_MILITARY_CONVOY",
    "SERVICE_EARN_TUNER_AWARD_FLEECA_BANK",
    "SERVICE_EARN_TUNER_AWARD_FREIGHT_TRAIN",
    "SERVICE_EARN_TUNER_AWARD_BOLINGBROKE_ASS",
    "SERVICE_EARN_TUNER_AWARD_IAA_RAID",
    "SERVICE_EARN_TUNER_AWARD_METH_JOB",
    "SERVICE_EARN_TUNER_AWARD_BUNKER_RAID",
    "SERVICE_EARN_AUTO_SHOP_DELIVERY_AWARD",
    "SERVICE_EARN_AGENCY_SECURITY_CONTRACT",
    "SERVICE_EARN_AGENCY_PAYPHONE_HIT",
    "SERVICE_EARN_AGENCY_STORY_PREP",
    "SERVICE_EARN_AGENCY_STORY_FINALE",
    "SERVICE_EARN_FIXER_AWARD_SEC_CON",
    "SERVICE_EARN_FIXER_AWARD_PHONE_HIT",
    "SERVICE_EARN_FIXER_AWARD_AGENCY_STORY",
    "SERVICE_EARN_FIXER_AWARD_SHORT_TRIP",
    "SERVICE_EARN_FIXER_RIVAL_DELIVERY",
    "SERVICE_EARN_MUSIC_STUDIO_SHORT_TRIP",
    "SERVICE_EARN_FROM_CONTRABAND",
    "SERVICE_EARN_NCLUB_TROUBLEMAKER",
    "SERVICE_EARN_SIGHTSEEING_REWARD",
    "SERVICE_EARN_AMBIENT_JOB_CLUBHOUSE_CONTRACT",
    "SERVICE_EARN_AMBIENT_JOB_UNDERWATER_CARGO",
    "SERVICE_EARN_AMBIENT_JOB_CRIME_SCENE",
    "SERVICE_EARN_AMBIENT_JOB_METAL_DETECTOR",
    "SERVICE_EARN_AMBIENT_JOB_SMUGGLER_PLANE",
    "SERVICE_EARN_AMBIENT_JOB_SMUGGLER_TRAIL",
    "SERVICE_EARN_AMBIENT_JOB_GOLDEN_GUN",
    "SERVICE_EARN_AMBIENT_JOB_AMMUNATION_DELIVERY",
    "SERVICE_EARN_AMBIENT_JOB_SOURCE_RESEARCH",
    "SERVICE_EARN_YOHAN_SOURCE_GOODS",
    "SERVICE_EARN_TAXI_JOB",
    "SERVICE_EARN_DAILY_STASH_HOUSE_PARTICIPATION",
    "SERVICE_EARN_DAILY_STASH_HOUSE_COMPLETED",
    "SERVICE_EARN_AMBIENT_JOB_GANG_CONVOY",
    "SERVICE_EARN_AMBIENT_JOB_SHOP_ROBBERY",
    "SERVICE_EARN_AMBIENT_JOB_XMAS_MUGGER",
    "SERVICE_EARN_AMBIENT_JOB_MAZE_BANK",
    "SERVICE_EARN_JUGGALO_STORY_MISSION",
    "SERVICE_EARN_JUGGALO_PHONE_MISSION",
    "SERVICE_EARN_WINTER_22_AWARD_JUGGALO_STORY",
    "SERVICE_EARN_WINTER_22_AWARD_ACID_LAB",
    "SERVICE_EARN_WINTER_22_AWARD_DAILY_STASH",
    "SERVICE_EARN_WINTER_22_AWARD_DEAD_DROP",
    "SERVICE_EARN_WINTER_22_AWARD_RANDOM_EVENT",
    "SERVICE_EARN_WINTER_22_AWARD_TAXI",
    "SERVICE_EARN_ACID_LAB_SETUP_PARTICIPATION",
    "SERVICE_EARN_ACID_LAB_SOURCE_PARTICIPATION",
    "SERVICE_EARN_ACID_LAB_SELL_PARTICIPATION",
    "SERVICE_EARN_SMUGGLER_OPS",
    "SERVICE_EARN_AMBIENT_JOB_ARMORED_TRUCK",
    "SERVICE_EARN_AMBIENT_JOB_BICYCLE_TIME_TRIAL",
    "SERVICE_EARN_CAYO_ATTRITION_BONUS_OBJECTIVE",
    "SERVICE_EARN_AVENGER_OPERATIONS",
    "SERVICE_EARN_AVENGER_OPS_BONUS",
    "SERVICE_EARN_AMBIENT_JOB_DRUG_VEHICLE",
    "SERVICE_EARN_CHICKEN_FACTORY_RAID_PREP",
    "SERVICE_EARN_CHICKEN_FACTORY_RAID_FINALE",
    "SERVICE_EARN_WINTER_23_AWARD_CHICKEN_FACTORY_RAID",
    "SERVICE_EARN_WINTER_23_AWARD_SALVAGE_YARD",
    "SERVICE_EARN_SALVAGE_YARD_ROBBERY_PREP",
    "SERVICE_EARN_SALVAGE_YARD_ROBBERY_FINALE",
    "SERVICE_EARN_SALVAGE_VEHICLE",
    "SERVICE_EARN_WEEKLY_OBJECTIVE_COMPLETED",
    "SERVICE_EARN_AMBIENT_JOB_XMAS_TRUCK",
    "SERVICE_EARN_AMBIENT_JOB_TOW_TRUCK_WORK",
    "SERVICE_EARN_SALVAGE_YARD_SELL_VEH",
    "SERVICE_EARN_BAIL_OFFICE_PRISONER",
    "SERVICE_EARN_BAIL_OFFICE_HIGH_VALUE_PRISONER",
    "SERVICE_EARN_BOUNTY_STANDARD_TARGET_BOSS",
    "SERVICE_EARN_BOUNTY_STANDARD_TARGET_GOON",
    "SERVICE_EARN_BOUNTY_HIGH_VALUE_TARGET_BOSS",
    "SERVICE_EARN_BOUNTY_HIGH_VALUE_TARGET_GOON",
    "SERVICE_EARN_BOUNTY24_DISPATCH_WORK",
    "SERVICE_EARN_BOUNTY24_PIZZA_DELIVERY",
    "SERVICE_EARN_BOUNTY24_UFO_ABDUCTION",
    "SERVICE_EARN_BOUNTY24_AWARD"
}

local selected_transaction = 0

service_transactions_tab:add_imgui(function()
    ImGui.SetNextItemWidth(500)
    selected_transaction = ImGui.Combo("Select Transaction", selected_transaction, transactions, #transactions)
    
    if ImGui.Button("Trigger Transaction") then
        script.run_in_fiber(function(_script)
            if SCRIPT.GET_NUMBER_OF_THREADS_RUNNING_THE_SCRIPT_WITH_THIS_HASH(joaat("freemode")) > 0 and SCRIPT.GET_NUMBER_OF_THREADS_RUNNING_THE_SCRIPT_WITH_THIS_HASH(joaat("shop_controller")) > 0 then
                local hash    = joaat(transactions[selected_transaction + 1])
                local price   = NETSHOPPING.NET_GAMESERVER_GET_PRICE(hash, joaat("CATEGORY_SERVICE_WITH_THRESHOLD"), true)
                local tempvar = 0
                script.call_function("TST", "shop_controller", "2D 06 09 00 00 5D ? ? ? 06", 0, {hash, price, tempvar, 1, 0, 0}) -- Last arg seems to be unused
                _script:sleep(500)
                if globals.get_int(4537455) ~= 1 then
                    gui.show_message("Service Transactions", "Transaction Successful.")
                else
                    gui.show_error("Service Transactions", "Transaction Failed.")
                    globals.set_int(4537455, 0) -- There is an unused code in the function that bails you if the transaction fails
                end
            else
                gui.show_error("Service Transactions", "freemode and shop_controller is not running.")
            end
        end)
    end
end)